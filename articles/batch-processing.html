<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="workloopR">
<title>Batch processing • workloopR</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Batch processing">
<meta property="og:description" content="workloopR">
<meta property="og:image" content="https://docs.ropensci.org/workloopR/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">workloopR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/Introduction-to-workloopR.html">Introduction to workloopR</a>
    <a class="dropdown-item" href="../articles/non-ddf-sources.html">Importing data from non .ddf sources</a>
    <a class="dropdown-item" href="../articles/Calculating-twitch-kinetics.html">Working with isometric experiments</a>
    <a class="dropdown-item" href="../articles/Analyzing-workloops.html">Analyzing work loop experiments</a>
    <a class="dropdown-item" href="../articles/batch-processing.html">Batch processing</a>
    <a class="dropdown-item" href="../articles/Plotting-workloopR.html">Plotting data in workloopR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/workloopR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Batch processing</h1>
                        <h4 data-toc-skip class="author">Shreeram Senthivasan</h4>
            
            <h4 data-toc-skip class="date">2024-02-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/workloopR/blob/HEAD/vignettes/batch-processing.Rmd" class="external-link"><code>vignettes/batch-processing.Rmd</code></a></small>
      <div class="d-none name"><code>batch-processing.Rmd</code></div>
    </div>

    
    
<p>Many of the functions in the <code>workloopR</code> package are built to facilitate batch processing of workloop and related data files. This vignette will start with an overview of how the functions were intended to be used for batch processing and then provide specific examples.</p>
<div class="section level2">
<h2 id="conceptual-overview">Conceptual overview<a class="anchor" aria-label="anchor" href="#conceptual-overview"></a>
</h2>
<p>We generally expect a single file to store data from a single experimental trial, whereas directories hold data from all the trials of a single experiment. Accordingly, the <code>muscle_stim</code> objects created and used by most of the <code>workloopR</code> functions are intended to hold data from a single trial of a workloop or related experiment. Lists are then used to package together trials from a single experiment. This also lends itself to using recursion to transform and analyze all data from a single experiment.</p>
<p>In broad strokes, there are three ways that batch processing has been worked into <code>workloopR</code> functions. First, some functions like the <code>*_dir()</code> family of import functions and <code><a href="../reference/summarize_wl_trials.html">summarize_wl_trials()</a></code> specifically generate or require lists of <code>muscle_stim</code> objects. Second, the first argument of all other functions are the objects being manipulated, which can help clean up recursion using the <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> family of functions. Finally, some functions return summarized data as single rows of a data.frame that can easily be bound together to generate a summary table.</p>
</div>
<div class="section level2">
<h2 id="load-packages-and-data">Load packages and data<a class="anchor" aria-label="anchor" href="#load-packages-and-data"></a>
</h2>
<p>This vignette will rely heavily on the <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> family of functions for recursion, though it should be mentioned that the <code><a href="https://rdrr.io/r/base/apply.html" class="external-link">base::apply()</a></code> family of functions would work as well.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/workloopR/">workloopR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="necessarily-multi-trial-functions">Necessarily-multi-trial functions<a class="anchor" aria-label="anchor" href="#necessarily-multi-trial-functions"></a>
</h2>
<div class="section level3">
<h3 id="dir-functions">
<code>*_dir()</code> functions<a class="anchor" aria-label="anchor" href="#dir-functions"></a>
</h3>
<p>Both <code><a href="../reference/read_ddf.html">read_ddf()</a></code> and <code><a href="../reference/read_analyze_wl.html">read_analyze_wl()</a></code> have alternatives suffixed by <code>_dir()</code> to read in multiple files from a directory. Both take a path to the directory and an optional regular expression to filter files by and return a list of <code>muscle_stim</code> objects or <code>analyzed_workloop</code> objects, respectively.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workloop_trials_list</span><span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"extdata/wl_duration_trials"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">'workloopR'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/read_ddf_dir.html">read_ddf_dir</a></span><span class="op">(</span>phase_from_peak <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">workloop_trials_list</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; # Workloop Data: 3 channels recorded over 0.3244s</span></span>
<span><span class="co">#&gt; File ID: 01_4pulse.ddf</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 0.698128 57.2970    0</span></span>
<span><span class="co">#&gt; 2 2e-04 0.699741 57.7805    0</span></span>
<span><span class="co">#&gt; 3 3e-04 0.699418 58.9095    0</span></span>
<span><span class="co">#&gt; 4 4e-04 0.697160 55.8450    0</span></span>
<span><span class="co">#&gt; 5 5e-04 0.698773 58.2645    0</span></span>
<span><span class="co">#&gt; 6 6e-04 0.698451 57.4580    0</span></span>
<span><span class="co">#&gt; # … with 3238 more rows</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; # Workloop Data: 3 channels recorded over 0.3244s</span></span>
<span><span class="co">#&gt; File ID: 02_2pulse.ddf</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 0.698773 47.9420    0</span></span>
<span><span class="co">#&gt; 2 2e-04 0.698451 48.1035    0</span></span>
<span><span class="co">#&gt; 3 3e-04 0.700064 48.2645    0</span></span>
<span><span class="co">#&gt; 4 4e-04 0.698451 48.5875    0</span></span>
<span><span class="co">#&gt; 5 5e-04 0.698773 48.7485    0</span></span>
<span><span class="co">#&gt; 6 6e-04 0.699418 49.0710    0</span></span>
<span><span class="co">#&gt; # … with 3238 more rows</span></span></code></pre></div>
<p>The <code>sort_by</code> argument can be used to rearrange this list by any attribute of the read-in objects. By default, the objects are sorted by their modification time. Other arguments of <code><a href="../reference/read_ddf.html">read_ddf()</a></code> and <code><a href="../reference/read_analyze_wl.html">read_analyze_wl()</a></code> can also be passed to their <code>*_dir()</code> alternatives as named arguments.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analyzed_wl_list</span><span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"extdata/wl_duration_trials"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">'workloopR'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/read_analyze_wl_dir.html">read_analyze_wl_dir</a></span><span class="op">(</span>sort_by <span class="op">=</span> <span class="st">'file_id'</span>,</span>
<span>                      phase_from_peak <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      cycle_def <span class="op">=</span> <span class="st">'lo'</span>,</span>
<span>                      keep_cycles <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">analyzed_wl_list</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; File ID: 01_4pulse.ddf</span></span>
<span><span class="co">#&gt; Cycles: 1 cycles kept out of 5</span></span>
<span><span class="co">#&gt; Mean Work: 0.00274 J</span></span>
<span><span class="co">#&gt; Mean Power: 0.07843 W</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; File ID: 02_2pulse.ddf</span></span>
<span><span class="co">#&gt; Cycles: 1 cycles kept out of 5</span></span>
<span><span class="co">#&gt; Mean Work: 0.00098 J</span></span>
<span><span class="co">#&gt; Mean Power: 0.02783 W</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarizing-workloop-trials">Summarizing workloop trials<a class="anchor" aria-label="anchor" href="#summarizing-workloop-trials"></a>
</h3>
<p>In a series of workloop trials, it can useful to see how mean power and work change as you vary different experimental parameters. To facilitate this, <code><a href="../reference/summarize_wl_trials.html">summarize_wl_trials()</a></code> specifically takes a list of <code>analyzed_workloop</code> objects and returns a <code>data.frame</code> of this information. We will explore ways of generating lists of analyzed workloops without using <code><a href="../reference/read_analyze_wl_dir.html">read_analyze_wl_dir()</a></code> in the following section.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analyzed_wl_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">summarize_wl_trials</span></span>
<span><span class="co">#&gt;         File_ID Cycle_Frequency Amplitude  Phase Stimulus_Pulses</span></span>
<span><span class="co">#&gt; 1 01_4pulse.ddf              28      3.15 -24.36               4</span></span>
<span><span class="co">#&gt; 2 02_2pulse.ddf              28      3.15 -24.64               2</span></span>
<span><span class="co">#&gt; 3 03_6pulse.ddf              28      3.15 -24.92               6</span></span>
<span><span class="co">#&gt; 4 04_4pulse.ddf              28      3.15 -24.64               4</span></span>
<span><span class="co">#&gt;   Stimulus_Frequency      mtime     Mean_Work  Mean_Power</span></span>
<span><span class="co">#&gt; 1                300 1709186061  0.0027387056 0.078427135</span></span>
<span><span class="co">#&gt; 2                300 1709186061  0.0009849216 0.027832717</span></span>
<span><span class="co">#&gt; 3                300 1709186061 -0.0002192395 0.004323004</span></span>
<span><span class="co">#&gt; 4                300 1709186061  0.0022793831 0.065468837</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="manual-recursion-examples">Manual recursion examples<a class="anchor" aria-label="anchor" href="#manual-recursion-examples"></a>
</h2>
<div class="section level3">
<h3 id="batch-import-for-non-ddf-data">Batch import for non-ddf data<a class="anchor" aria-label="anchor" href="#batch-import-for-non-ddf-data"></a>
</h3>
<p>One of the more realistic use cases for manual recursion is for importing data from multiple related trials that are not stored in ddf format. As with importing individual non-ddf data sources, we start by reading the data into a data.frame, only now we want a list of data.frames. In this example, we will read in csv files and stitch them into a list using <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">non_ddf_list</span><span class="op">&lt;-</span></span>
<span>  <span class="co"># Generate a vector of file names</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"extdata/twitch_csv"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">'workloopR'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>full.names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Read into a list of data.frames</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">read.csv</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Coerce into a workloop object</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">as_muscle_stim</span>, type <span class="op">=</span> <span class="st">"twitch"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-transformation-and-analysis">Data transformation and analysis<a class="anchor" aria-label="anchor" href="#data-transformation-and-analysis"></a>
</h3>
<p>Applying a constant transformation to a list of <code>muscle_stim</code> objects is fairly straightforward using <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">non_ddf_list</span><span class="op">&lt;-</span></span>
<span>  <span class="va">non_ddf_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">.x</span>,<span class="st">"stimulus_width"</span><span class="op">)</span><span class="op">&lt;-</span><span class="fl">0.2</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">.x</span>,<span class="st">"stimulus_offset"</span><span class="op">)</span><span class="op">&lt;-</span><span class="fl">0.1</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fix_GR</span>,<span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Applying a non-constant transformation like setting a unique file ID can be done using <code><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">purrr::map2()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_ids</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"0"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="st">"-"</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">5</span>,<span class="st">"mA-twitch.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">non_ddf_list</span><span class="op">&lt;-</span></span>
<span>  <span class="va">non_ddf_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">map2</a></span><span class="op">(</span><span class="va">file_ids</span>, <span class="op">~</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">.x</span>,<span class="st">"file_id"</span><span class="op">)</span><span class="op">&lt;-</span><span class="va">.y</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">non_ddf_list</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; # Twitch Data: 3 channels recorded over 0.4001s</span></span>
<span><span class="co">#&gt; File ID: 01-2mA-twitch.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time  Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 -3.002651 474.262    0</span></span>
<span><span class="co">#&gt; 2 2e-04 -3.001682 471.682    0</span></span>
<span><span class="co">#&gt; 3 3e-04 -3.001360 472.650    0</span></span>
<span><span class="co">#&gt; 4 4e-04 -3.000554 471.037    0</span></span>
<span><span class="co">#&gt; 5 5e-04 -3.001199 472.004    0</span></span>
<span><span class="co">#&gt; 6 6e-04 -3.001360 472.327    0</span></span>
<span><span class="co">#&gt; # … with 3995 more rows</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; # Twitch Data: 3 channels recorded over 0.4001s</span></span>
<span><span class="co">#&gt; File ID: 02-3mA-twitch.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time  Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 -3.002489 476.520    0</span></span>
<span><span class="co">#&gt; 2 2e-04 -3.001199 475.553    0</span></span>
<span><span class="co">#&gt; 3 3e-04 -3.000876 474.585    0</span></span>
<span><span class="co">#&gt; 4 4e-04 -3.001199 473.940    0</span></span>
<span><span class="co">#&gt; 5 5e-04 -3.001199 474.262    0</span></span>
<span><span class="co">#&gt; 6 6e-04 -3.001360 474.262    0</span></span>
<span><span class="co">#&gt; # … with 3995 more rows</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; # Twitch Data: 3 channels recorded over 0.4001s</span></span>
<span><span class="co">#&gt; File ID: 03-4mA-twitch.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time  Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 -3.002651 451.037    0</span></span>
<span><span class="co">#&gt; 2 2e-04 -3.001360 449.747    0</span></span>
<span><span class="co">#&gt; 3 3e-04 -3.000715 449.747    0</span></span>
<span><span class="co">#&gt; 4 4e-04 -3.001037 449.424    0</span></span>
<span><span class="co">#&gt; 5 5e-04 -3.000876 449.424    0</span></span>
<span><span class="co">#&gt; 6 6e-04 -3.001521 450.069    0</span></span>
<span><span class="co">#&gt; # … with 3995 more rows</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; # Twitch Data: 3 channels recorded over 0.4001s</span></span>
<span><span class="co">#&gt; File ID: 04-5mA-twitch.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Time  Position   Force Stim</span></span>
<span><span class="co">#&gt; 1 1e-04 -3.002327 446.521    0</span></span>
<span><span class="co">#&gt; 2 2e-04 -3.001521 445.876    0</span></span>
<span><span class="co">#&gt; 3 3e-04 -3.001199 445.876    0</span></span>
<span><span class="co">#&gt; 4 4e-04 -3.001199 445.876    0</span></span>
<span><span class="co">#&gt; 5 5e-04 -3.001360 445.553    0</span></span>
<span><span class="co">#&gt; 6 6e-04 -3.001037 446.199    0</span></span>
<span><span class="co">#&gt; # … with 3995 more rows</span></span></code></pre></div>
<p>Analysis can similarly be run recursively. <code><a href="../reference/isometric_timing.html">isometric_timing()</a></code> in particular returns a single row of a data.frame with timings and forces for key points in an isometric dataset. Here we can use <code><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">purrr::map_dfr()</a></code> to bind the rows together for neatness.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">non_ddf_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">isometric_timing</span><span class="op">)</span></span>
<span><span class="co">#&gt;             file_id time_stim force_stim time_peak force_peak time_rising_10</span></span>
<span><span class="co">#&gt; 1 01-2mA-twitch.csv    0.1002    480.391    0.1153    654.258         0.1049</span></span>
<span><span class="co">#&gt; 2 02-3mA-twitch.csv    0.1002    461.682    0.1149    748.772         0.1050</span></span>
<span><span class="co">#&gt; 3 03-4mA-twitch.csv    0.1002    450.069    0.1145    799.416         0.1049</span></span>
<span><span class="co">#&gt; 4 04-5mA-twitch.csv    0.1002    448.134    0.1141    824.899         0.1048</span></span>
<span><span class="co">#&gt;   force_rising_10 time_rising_90 force_rising_90 time_relaxing_90</span></span>
<span><span class="co">#&gt; 1         497.810         0.1118         637.484           0.1216</span></span>
<span><span class="co">#&gt; 2         492.326         0.1109         720.708           0.1207</span></span>
<span><span class="co">#&gt; 3         488.778         0.1106         764.901           0.1201</span></span>
<span><span class="co">#&gt; 4         488.778         0.1107         787.803           0.1198</span></span>
<span><span class="co">#&gt;   force_relaxing_90 time_relaxing_50 force_relaxing_50</span></span>
<span><span class="co">#&gt; 1           637.807           0.1348           567.486</span></span>
<span><span class="co">#&gt; 2           721.031           0.1325           605.872</span></span>
<span><span class="co">#&gt; 3           764.901           0.1314           624.904</span></span>
<span><span class="co">#&gt; 4           788.126           0.1311           636.517</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
